<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrated View | ChargedUP</title>
    <meta name="description"
        content="See the complete energy conversion chain from battery chemistry to motor motion in your RC car.">

    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header">
        <div class="header__inner">
            <a href="index.html" class="header__logo">
                <img src="assets/logo.svg" alt="" width="40" height="40">
                <span>ChargedUP</span>
            </a>
            <nav class="nav">
                <button class="nav-toggle" aria-label="Toggle menu"><span class="nav-toggle__bar"></span><span
                        class="nav-toggle__bar"></span><span class="nav-toggle__bar"></span></button>
                <ul class="nav__list">
                    <li><a href="index.html" class="nav__link">Home</a></li>
                    <li><a href="chemistry.html" class="nav__link">Chemistry</a></li>
                    <li><a href="physics.html" class="nav__link">Physics</a></li>
                    <li><a href="integrated.html" class="nav__link nav__link--active">Integrated</a></li>
                    <li><a href="simulations.html" class="nav__link">Simulations</a></li>
                    <li><a href="glossary.html" class="nav__link">Glossary</a></li>
                    <li><a href="sources.html" class="nav__link">Sources</a></li>
                    <li><a href="about.html" class="nav__link">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content" class="page-wrapper">
        <div class="container">
            <section class="section">
                <h1>üîÑ The Complete Energy Chain</h1>
                <p class="text-lg">Battery ‚Üí Current ‚Üí Magnetic Field ‚Üí Motor ‚Üí Motion</p>
            </section>

            <!-- Energy Flow Overview -->
            <section class="section content-container">
                <h2>Energy Conversion in Your RC Car</h2>
                <p>When you power on your RC car, a remarkable chain of energy transformations occurs:</p>

                <div class="card mb-lg">
                    <div class="grid grid--4 text-center">
                        <div>
                            <div style="font-size:2.5rem;">üîã</div>
                            <h4 class="text-cyan">Chemical</h4>
                            <p class="text-sm">Zn + MnO‚ÇÇ reaction releases electrons</p>
                        </div>
                        <div>
                            <div style="font-size:2.5rem;">‚ö°</div>
                            <h4 class="text-teal">Electrical</h4>
                            <p class="text-sm">Current flows through circuit</p>
                        </div>
                        <div>
                            <div style="font-size:2.5rem;">üß≤</div>
                            <h4 class="text-cyan">Magnetic</h4>
                            <p class="text-sm">Current creates B-field in motor</p>
                        </div>
                        <div>
                            <div style="font-size:2.5rem;">üöó</div>
                            <h4 class="text-teal">Mechanical</h4>
                            <p class="text-sm">Motor spins, wheels turn</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Interactive Pipeline -->
            <section class="section">
                <h2>üìä Interactive Pipeline</h2>

                <div class="grid grid--2 mb-lg">
                    <div class="card">
                        <h3>Step 1: Battery Chemistry</h3>
                        <p>Start by calculating your battery pack's energy output.</p>
                        <a href="chemistry.html" class="btn btn--primary btn--sm">Open Battery Calculator</a>

                        <div id="battery-summary" class="mt-lg"
                            style="padding:1rem; background:var(--color-bg-tertiary); border-radius:8px;">
                            <p class="text-muted text-sm">No battery data loaded. Run the chemistry calculator first
                                (stoichiometry mode).
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Step 2: Motor Physics</h3>
                        <p>See how the electrical energy powers the motor.</p>
                        <a href="physics.html" class="btn btn--primary btn--sm">Open Motor Simulator</a>

                        <div id="motor-summary" class="mt-lg"
                            style="padding:1rem; background:var(--color-bg-tertiary); border-radius:8px;">
                            <p class="text-muted text-sm">Motor data will appear after using the physics simulator.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Energy Flow Diagram (Sankey-style) -->
            <section class="section">
                <h2>Energy Flow Diagram</h2>
                <div class="card">
                    <div style="padding: 2rem; text-align: center;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                            <div
                                style="flex: 1; min-width: 120px; padding: 1rem; background: linear-gradient(135deg, #00D1FF22, #3EF1C622); border-radius: 12px;">
                                <div style="font-size: 1.5rem;">üîã</div>
                                <strong>Chemical Energy</strong>
                                <p class="text-cyan" id="energy-chemical">-- Wh</p>
                            </div>
                            <div style="font-size: 2rem;">‚Üí</div>
                            <div
                                style="flex: 1; min-width: 120px; padding: 1rem; background: linear-gradient(135deg, #3EF1C622, #00D1FF22); border-radius: 12px;">
                                <div style="font-size: 1.5rem;">‚ö°</div>
                                <strong>Electrical</strong>
                                <p class="text-teal" id="energy-electrical">-- V √ó -- A</p>
                            </div>
                            <div style="font-size: 2rem;">‚Üí</div>
                            <div
                                style="flex: 1; min-width: 100px; padding: 1rem; background: #ff634722; border-radius: 12px;">
                                <div style="font-size: 1.5rem;">üî•</div>
                                <strong>Heat Loss</strong>
                                <p style="color: #ff6347;" id="energy-loss">I¬≤R</p>
                            </div>
                            <div style="font-size: 2rem;">‚Üí</div>
                            <div
                                style="flex: 1; min-width: 120px; padding: 1rem; background: linear-gradient(135deg, #00D1FF22, #3EF1C622); border-radius: 12px;">
                                <div style="font-size: 1.5rem;">‚öôÔ∏è</div>
                                <strong>Mechanical</strong>
                                <p class="text-cyan" id="energy-mechanical">Motor motion</p>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted text-sm text-center">Energy is conserved but transformed. Some is lost as heat
                        in battery internal resistance and motor windings.</p>
                </div>
            </section>

            <!-- Complete Worked Example -->
            <section class="section content-container">
                <h2>üìñ Complete Worked Example</h2>

                <div class="card worked-example">
                    <h3>RC Car: From Battery to Wheel</h3>
                    <p><strong>Scenario:</strong> An RC car uses a 4√óAA alkaline pack (6V, 2000mAh) to power a small DC
                        motor (3Œ©, 50-turn coil).</p>

                    <div class="collapsible-section">
                        <button type="button" class="collapsible-toggle" aria-expanded="false"
                            onclick="this.setAttribute('aria-expanded', this.getAttribute('aria-expanded') === 'true' ? 'false' : 'true'); this.nextElementSibling.style.display = this.getAttribute('aria-expanded') === 'true' ? 'block' : 'none'; this.querySelector('.toggle-icon').textContent = this.getAttribute('aria-expanded') === 'true' ? '‚ñ≤' : '‚ñº';"
                            style="cursor: pointer; padding: 0.75rem 1rem; background: var(--color-bg-tertiary); border-radius: 8px; margin-bottom: 1rem; width: 100%; text-align: left; border: none; color: inherit; font-size: inherit;">
                            <strong>üìù Full Analysis (click to expand)</strong> <span class="toggle-icon">‚ñº</span>
                        </button>
                        <div class="collapsible-content" style="display: none;">
                            <h4>Part A: Battery Chemistry</h4>
                            <pre><code>Pack voltage: 4 √ó 1.5V = 6.0V
Pack capacity: 2000 mAh
Total charge: 2000 √ó 3.6 = 7200 C
Total energy: 6.0V √ó 7200C = 43,200 J = 12.0 Wh</code></pre>

                            <h4>Part B: Current Flow</h4>
                            <pre><code>Internal resistance: 4 √ó 0.3Œ© = 1.2Œ©
Total resistance: 3Œ© + 1.2Œ© = 4.2Œ©
Current: 6V / 4.2Œ© = 1.43 A
Loaded voltage: 6V - (1.43A √ó 1.2Œ©) = 4.28V at motor</code></pre>

                            <h4>Part C: Magnetic Field in Motor Coil</h4>
                            <pre><code>For motor coil (N=50, L=2cm, I=1.43A):
B = Œº‚ÇÄ √ó N √ó I / L
B = (1.257√ó10‚Åª‚Å∂) √ó 50 √ó 1.43 / 0.02
B ‚âà 4.5 mT</code></pre>

                            <h4>Part D: Power & Runtime</h4>
                            <pre><code>Power to motor: 4.28V √ó 1.43A = 6.1W
Power lost to heat: 1.43¬≤ √ó 1.2 = 2.5W
Efficiency: 6.1 / (6.1 + 2.5) ‚âà 71%
Runtime: 2000mAh / 1430mA ‚âà 1.4 hours</code></pre>

                            <h4>Interpretation</h4>
                            <p>The battery's chemical energy is converted to electrical energy at 71% efficiency (29%
                                lost as heat in internal resistance). The current creates a magnetic field of about
                                4.5mT in the motor coil, which interacts with permanent magnets to produce rotation. The
                                car can run for approximately 1.4 hours before the batteries are depleted.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Navigation -->
            <section class="section text-center">
                <a href="simulations.html" class="btn btn--primary btn--lg">Try Virtual Labs ‚Üí</a>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>ChargedUP: Behind The Scenes of an RC Car ‚Äî December 20, 2025</p>
        </div>
    </footer>

    <script src="scripts/main.js"></script>
    <script>
        // Load battery and physics data if available
        document.addEventListener('DOMContentLoaded', () => {
            // Load battery/chemistry data
            const batteryData = localStorage.getItem('chargedup_battery_for_physics');
            if (batteryData) {
                try {
                    const data = JSON.parse(batteryData);
                    const summary = document.getElementById('battery-summary');
                    if (summary && data) {
                        const packVoltage = data.packVoltage || data.voltage || '--';
                        const energyWh = data.energyWh?.toFixed(2) || '--';
                        const current = data.motorCurrent || '--';
                        const capacityMah = data.packCapacityMah || data.capacityMah || '--';
                        const internalR = data.packInternalR || data.internalR || '--';
                        const loadedV = data.loadedResults?.loadedVoltage?.toFixed(2) || '--';
                        const runtime = data.runtime?.hours?.toFixed(1) || '--';

                        summary.innerHTML = `
                            <p style="color: #3EF1C6; font-weight: 600; margin-bottom: 0.5rem;">‚úÖ Data Saved from Chemistry Calculator</p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.9rem;">
                                <p><strong>Pack Voltage:</strong> ${packVoltage} V</p>
                                <p><strong>Capacity:</strong> ${capacityMah} mAh</p>
                                <p><strong>Energy:</strong> ${energyWh} Wh</p>
                                <p><strong>Internal R:</strong> ${internalR} Œ©</p>
                                <p><strong>Motor Current:</strong> ${current} A</p>
                                <p><strong>Loaded Voltage:</strong> ${loadedV} V</p>
                                <p><strong>Est. Runtime:</strong> ${runtime} hrs</p>
                            </div>
                            <p class="text-muted text-sm" style="margin-top: 0.75rem;">Data persists until cleared in Settings ‚öôÔ∏è</p>
                        `;

                        // Update energy flow diagram
                        document.getElementById('energy-chemical').textContent = `${energyWh} Wh`;
                        document.getElementById('energy-electrical').textContent = `${packVoltage}V √ó ${current}A`;
                        if (data.loadedResults?.powerLossW) {
                            document.getElementById('energy-loss').textContent = `${data.loadedResults.powerLossW.toFixed(2)} W`;
                        }
                    }
                } catch (e) {
                    console.log('Error loading battery data:', e);
                }
            }

            // Load physics/motor data if available
            const physicsData = localStorage.getItem('chargedup_motor_for_integrated');
            if (physicsData) {
                try {
                    const data = JSON.parse(physicsData);
                    const summary = document.getElementById('motor-summary');
                    if (summary && data) {
                        summary.innerHTML = `
                            <p style="color: #00D1FF; font-weight: 600; margin-bottom: 0.5rem;">‚úÖ Data Saved from Physics Simulator</p>
                            <div style="font-size: 0.9rem;">
                                <p><strong>B-Field:</strong> ${data.bField?.toFixed(2) || '--'} mT</p>
                                <p><strong>Motor Power:</strong> ${data.motorPower?.toFixed(2) || '--'} W</p>
                                <p><strong>Est. RPM:</strong> ${data.estimatedRPM || '--'}</p>
                            </div>
                            <p class="text-muted text-sm" style="margin-top: 0.75rem;">Data persists until cleared in Settings ‚öôÔ∏è</p>
                        `;
                    }
                } catch (e) {
                    console.log('Error loading physics data:', e);
                }
            }
        });
    </script>
</body>

</html>